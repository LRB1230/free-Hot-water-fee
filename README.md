# Free-hot-water-fee
关于湖南大众传媒，洗澡水费破解，提供教程
大众的水费实在太贵了，洗一次4块钱，网上的的教程又完全没有关于智校乐的

长沙基本全部是用智校乐，理论全部可行

交流群：https://qm.qq.com/q/cabGZxG88g
# 接下来是原理
水表本质上是无法联网的，水表是通过蓝牙连接手机，手机再发出数据包给服务器。
我们执行的操作是在手机发出数据包的时候拦截下来这个数据包，通过规则替换，替换水费为0

不能使用在黄鸟普通版，没有规则替换，普通版本没有规则替换，而数据包有随机值校验（防止重发）
# 教程
**1.在我的库中下载HttpCanary专业版,并且安装，自行下载mt管理器**
  
**2.安装CA证书**
  
**3.使用黄鸟，抓取点击"结束洗澡"发出的数据包**
  
**4.找到具体是哪一个数据包发出洗了多少钱**
  
**5.重写，创建规则**
  长按该数据包，点重写，起一个的名字，右上角下一步，选到请求里面，最下面有一个跟随客户端，点击跟随客户端右边的笔编辑，选择规则替换

**6.写规则之前，我们要分析一下这个数据包，关于个人敏感信息我打成x了**
```
用户身份信息

· accountId=xxxxxx：用户账户ID
· telPhone=xxxxxxxxxxx：用户手机号
· loginCode=xxxxxxxxxxxx：登录会话令牌（MD5格式）

交易信息

· projectId=73：消费项目ID（固定值，可能是洗衣服务）
· upMoney=40：消费金额为40（消费金额0.04）
· accountType=x：账户类型
· protocolType=xxxx：协议类型（xxxx可能表示特定通信协议）

时间与安全

· consumeDate=2511xxxxxx：消费时间（2025年11月xxxxxxxxx)
· randomNumber=xxxxx：随机数（防重放攻击）

系统信息

· version=4.2.6：客户端版本
· phoneSystem=android：操作系统
· signature=：数字签名（为空，安全漏洞）

xfData 详细解析

结构分解：

偏移 十六进制 长度 解析结果 说明

0-1 80 1字节 协议头 固定起始标志

2-3 25 1字节 年(25) 2025年

4-5 11 1字节 月(11) 11月

6-7 xx 1字节 日

8-9 xx 1字节 时

10-11 xx 1字节 分

12-13 xx 1字节 秒

14-21 00000049 4字节 项目ID(73) 0x49 = 73

22-29 xxxxxxxx 4字节 未知 可能是版本或类型

30-37 xxxxxxxx 4字节 账户ID(xxxxx) xxxxx = xxxxx

38-45 xxxxxxxx 4字节 账户类型(x) 与accountType对应

46-53 xxxxxxxx 4字节 未知(xx) 可能与projectId相关

54-61 00001770 4字节 预付款金额or最高消费金额 （6000）6块钱

62-69 00000028 4字节 金额相关(40) 0x28 = 40

70-77 00000028 4字节 金额相关(40) 重复字段

78-85 xxxxxxxx 4字节 时间戳 可能是Unix时间戳

86-93 xxxx 4字节 随机数部分 与randomNumber关联

94-101 000400f0 4字节 设备标识 可能标识终端设备

102-109 000a0000 4字节 命令类型 0x0A = 10，可能表示特定操作

110-117 00000000 4字节 保留字段 全零

118-125 xxxxxxx 4字节 校验数据 可能是CRC32或校验和

126-131 7b9caf 3字节 结束标志 固定结束标记
```

特征

1. 零金额交易：upMoney=40 消费金额
2. 完整时间戳：包含精确到秒的交易时间
3. 设备信息：xfData中包含设备标识和随机数
4. 固定项目：projectId=73 重复出现
5. xfData中间的16进制消费金额 00000028 0x28 = 40

